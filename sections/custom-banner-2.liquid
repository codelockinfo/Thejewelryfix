<div class="custom-banner-section lazyloaded">
  <div class="swiper bannerSwiper">
    <div class="swiper-wrapper">
      {% for block in section.blocks offset:4 %}
      <div 
        class="swiper-slide"
        data-desktop-image="{{ block.settings.background_image | img_url: 'master' }}"
        data-mobile-image="{{ block.settings.backgroundmobile | img_url: 'master' }}"
        style="
          background-image: url({{ block.settings.background_image | img_url: 'master' }}); 
          background-size: cover; 
          background-position: center; 
          width: 100%; 
          height: 100%;
        "
      >
        <div class="custom-banner-img">
          <div class="width-container">
            <div class="custom-content">
              {% if block.settings.banner_heading != blank %}
                <div class="banner-heading">{{ block.settings.banner_heading }}</div>
              {% endif %}
              {% if block.settings.banner_main_heading != blank %}
                <div class="banner-main-heading">{{ block.settings.banner_main_heading }}</div>
              {% endif %}
              {% if block.settings.button_text != blank %}
                <a href="{{ block.settings.button_link }}" class="banner-button">{{ block.settings.button_text }}</a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    <div class="swiper-pagination"></div>
  </div>
</div>

<style>
/* General Swiper styles */
.swiper-slide {
  background-size: cover;
  background-position: center;
  width: 100%;
  height: 100%;
}

/* Mobile-specific styles */
@media (max-width: 768px) {
  .swiper-slide {
    background-image: none !important; /* Remove desktop background */
  }
  .swiper-slide[data-mobile-image] {
    background-image: url(var(--mobile-image)) !important; /* Apply mobile image */
  }
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const slides = document.querySelectorAll(".swiper-slide");

  // Adjust background image based on screen size
  function updateBackgroundImages() {
    slides.forEach(slide => {
      const mobileImage = slide.getAttribute("data-mobile-image");
      const desktopImage = slide.getAttribute("data-desktop-image");

      if (window.innerWidth <= 768 && mobileImage) {
        slide.style.setProperty("--mobile-image", mobileImage);
        slide.style.backgroundImage = `url(${mobileImage})`;
      } else if (desktopImage) {
        slide.style.backgroundImage = `url(${desktopImage})`;
      }
    });
  }

  // Initial update on page load
  updateBackgroundImages();

  // Update on window resize
  window.addEventListener("resize", updateBackgroundImages);
});

// Swiper initialization
var swiper = new Swiper(".bannerSwiper", {
  slidesPerView: 1,
  spaceBetween: 0,
  loop: true,
  pagination: {
    el: ".swiper-pagination",
    clickable: true,
  },
});
</script>
